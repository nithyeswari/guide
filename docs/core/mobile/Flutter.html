<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <!-- Background -->
  <rect width="800" height="600" fill="#f5f5f5"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle">Flutter Architecture on Android</text>
  
  <!-- Layers -->
  <g>
    <!-- Dart Application Layer -->
    <rect x="50" y="80" width="700" height="120" rx="10" fill="#0175C2" opacity="0.7"/>
    <text x="400" y="105" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="white">Dart Application Layer</text>
    
    <rect x="80" y="120" width="150" height="60" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="155" y="148" font-family="Arial" font-size="14" text-anchor="middle">Widget Tree</text>
    <text x="155" y="168" font-family="Arial" font-size="12" text-anchor="middle">(Stateless/Stateful)</text>
    
    <rect x="270" y="120" width="150" height="60" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="345" y="148" font-family="Arial" font-size="14" text-anchor="middle">State Management</text>
    <text x="345" y="168" font-family="Arial" font-size="12" text-anchor="middle">(Provider, Bloc, etc.)</text>
    
    <rect x="460" y="120" width="150" height="60" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="535" y="148" font-family="Arial" font-size="14" text-anchor="middle">Dart Isolate</text>
    <text x="535" y="168" font-family="Arial" font-size="12" text-anchor="middle">(Event Loop)</text>
    
    <!-- Framework Layer -->
    <rect x="50" y="220" width="700" height="100" rx="10" fill="#02569B" opacity="0.7"/>
    <text x="400" y="245" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle" fill="white">Flutter Framework Layer (Dart)</text>
    
    <rect x="80" y="260" width="130" height="40" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="145" y="285" font-family="Arial" font-size="14" text-anchor="middle">Material/Cupertino</text>
    
    <rect x="230" y="260" width="130" height="40" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="295" y="285" font-family="Arial" font-size="14" text-anchor="middle">Widgets</text>
    
    <rect x="380" y="260" width="130" height="40" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="445" y="285" font-family="Arial" font-size="14" text-anchor="middle">Rendering</text>
    
    <rect x="530" y="260" width="130" height="40" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="595" y="285" font-family="Arial" font-size="14" text-anchor="middle">Animation</text>
    
    <!-- Engine Layer -->
    <rect x="50" y="340" width="700" height="120" rx="10" fill="#54C5F8" opacity="0.7"/>
    <text x="400" y="365" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">Flutter Engine Layer (C/C++)</text>
    
    <rect x="80" y="380" width="130" height="60" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="145" y="408" font-family="Arial" font-size="14" text-anchor="middle">Dart VM</text>
    <text x="145" y="428" font-family="Arial" font-size="12" text-anchor="middle">(AOT/JIT)</text>
    
    <rect x="235" y="380" width="130" height="60" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="300" y="408" font-family="Arial" font-size="14" text-anchor="middle">Skia</text>
    <text x="300" y="428" font-family="Arial" font-size="12" text-anchor="middle">(Graphics Engine)</text>
    
    <rect x="390" y="380" width="130" height="60" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="455" y="408" font-family="Arial" font-size="14" text-anchor="middle">Text</text>
    <text x="455" y="428" font-family="Arial" font-size="12" text-anchor="middle">(HarfBuzz/LibTXT)</text>
    
    <rect x="545" y="380" width="130" height="60" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="610" y="408" font-family="Arial" font-size="14" text-anchor="middle">Platform Channels</text>
    <text x="610" y="428" font-family="Arial" font-size="12" text-anchor="middle">(Message Passing)</text>
    
    <!-- Embedder Layer -->
    <rect x="50" y="480" width="700" height="80" rx="10" fill="#9e9ac8" opacity="0.7"/>
    <text x="400" y="505" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">Android Platform Layer</text>
    
    <rect x="100" y="520" width="150" height="30" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="175" y="540" font-family="Arial" font-size="14" text-anchor="middle">FlutterView</text>
    
    <rect x="300" y="520" width="150" height="30" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="375" y="540" font-family="Arial" font-size="14" text-anchor="middle">Native Android Threads</text>
    
    <rect x="500" y="520" width="150" height="30" rx="5" fill="#ffffff" stroke="#000000"/>
    <text x="575" y="540" font-family="Arial" font-size="14" text-anchor="middle">Native Android APIs</text>
  </g>
  
  <!-- Arrows -->
  <g fill="none" stroke="#000000" stroke-width="2">
    <!-- Dart to Framework -->
    <path d="M 155 180 L 155 240" marker-end="url(#arrowhead)"/>
    <path d="M 345 180 L 345 240" marker-end="url(#arrowhead)"/>
    <path d="M 535 180 L 535 240" marker-end="url(#arrowhead)"/>
    
    <!-- Framework to Engine -->
    <path d="M 145 300 L 145 380" marker-end="url(#arrowhead)"/>
    <path d="M 295 300 L 295 360 L 300 360 L 300 380" marker-end="url(#arrowhead)"/>
    <path d="M 445 300 L 445 360 L 455 360 L 455 380" marker-end="url(#arrowhead)"/>
    <path d="M 595 300 L 595 360 L 610 360 L 610 380" marker-end="url(#arrowhead)"/>
    
    <!-- Engine to Embedder -->
    <path d="M 145 440 L 145 500 L 175 500 L 175 520" marker-end="url(#arrowhead)"/>
    <path d="M 300 440 L 300 500 L 375 500 L 375 520" marker-end="url(#arrowhead)"/>
    <path d="M 455 440 L 455 500 L 375 500" marker-end="url(#arrowhead)"/>
    <path d="M 610 440 L 610 500 L 575 500 L 575 520" marker-end="url(#arrowhead)"/>
    
    <!-- Horizontal connections in Engine Layer -->
    <path d="M 210 410 L 235 410"/>
    <path d="M 365 410 L 390 410"/>
    <path d="M 520 410 L 545 410"/>
  </g>
  
  <!-- Arrowhead marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" />
    </marker>
  </defs>
  
  <!-- Thread Labels -->
  <g font-family="Arial" font-size="11" fill="#555555">
    <rect x="630" y="380" width="80" height="15" rx="3" fill="#ffeeee" stroke="#ffcccc"/>
    <text x="670" y="392" text-anchor="middle">UI Thread</text>
    
    <rect x="630" y="400" width="80" height="15" rx="3" fill="#eeffee" stroke="#ccffcc"/>
    <text x="670" y="412" text-anchor="middle">Raster Thread</text>
    
    <rect x="630" y="420" width="80" height="15" rx="3" fill="#eeeeff" stroke="#ccccff"/>
    <text x="670" y="432" text-anchor="middle">IO Thread</text>
  </g>
</svg>